import json
import argparse


def print_results(data):
	print("Exam\tFinal")
	print("-" * 13)

	for i, d in sorted(data['grades'].items(), key=lambda x: x[0]):
		exam = i.rjust(4)
		final = ("%.2f" % d['total_grade']).rjust(8)
		print exam, final


def print_stats(data):
	for i, d in sorted(data['stats'].items(), key=lambda x: x[0]):
		exam = i
		print("{0} (Shown {1} times)".format(exam, d["count"]))

		for o, c in sorted(d['options'].items(), key=lambda x: x[0]):
			print("  {0}: {1} times".format(o, c))


def main():
	parser = argparse.ArgumentParser()
	parser.add_argument('results', help="The `results.json` file generated by evaluator.py")
	parser.add_argument('-s', '--stats', help="Print stats instead of results.", action='store_true')
	args = parser.parse_args()

	with open(args.results) as fp:
		if args.stats:
			print_stats(json.load(fp))
		else:
			print_results(json.load(fp))


if __name__ == '__main__':
	main()
